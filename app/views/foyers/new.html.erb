<%= javascript_include_tag 'jquery.js' %>
<%= javascript_include_tag 'jquery.bgiframe.min.js' %>
<%= javascript_include_tag 'jquery.autocomplete.min.js' %>
<%= stylesheet_link_tag 'jquery.autocomplete' %>
<%= javascript_include_tag  %>

<script type="text/javascript">
  $().ready(function(){

    // Cleanup any garbage
    //$("#foyer_adresse_code_postal").attr("disabled", true);
    //$("#foyer_adresse_code_postal").val("");

    function formatItem(row) {
      return row[0] + " (" + row[1] + ")";
    }
    function formatResult(row) {
      return row[0].replace(/(<.+?>)/gi, '');
    }

    $("#foyer_adresse_ville").autocomplete("<%=cities_path%>.js", {
      formatItem: formatItem,
      formatResult: formatResult,
      autoFill: true
    });

    $("#foyer_adresse_ville").result(function(event, data, formatted) {
      if (data)
        $(this).val(data[0]);
      $("#foyer_adresse_code_postal").val(data[1]);
    });

  });
</script>

<%= render :partial => "form" %>

<%= link_to 'Back', foyers_path %>

